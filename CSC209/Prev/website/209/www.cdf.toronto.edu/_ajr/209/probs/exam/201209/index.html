<!doctype html>
<html>


<!-- Mirrored from www.cdf.toronto.edu/~ajr/209/probs/exam/201209/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 00:59:27 GMT -->
<head>

<title>CSC 209: exam, December 2012</title>

<meta name=viewport content="width=device-width, initial-scale=1">

<style type="text/css">
    body {
        color: black;
        background-color: #ffdddd;
    }
    hr {
        border-style: solid;
    }
    div.toc {
        float: right;
        padding-left: 20px;
        padding-right: 20px;
        padding-top: 20px;
        padding-bottom: 20px;
        background-color: #cc7777;
        color: white;
        link: white;
        visited: white;
        line-height: 150%;
    }
    div.toc a:link {
        color: white;
    }
    div.toc a:visited {
        color: white;
    }

    .hidden { display: none; }
    .unhidden { display: block; }
</style>

<script type="text/javascript">
    function show(s) {
        document.getElementById(s).className = 'unhidden';
    }
    function reveal(n) {
        document.getElementById(n + '_teaser').className = 'hidden';
        document.getElementById(n + '_hr').className = 'unhidden';
        document.getElementById(n + '_full').className = 'unhidden';
	n1 = n + 1;
        document.getElementById(n1 + '_hr').className = 'unhidden';
    }
</script>

</head>

<body>
<div class=toc>

<a href="../../../.html">Introduction</a>
<br>
<a href="../../../announce.html">Announcements</a>

<p>

<a href="../../../lect/index.html">Lectures</a>
<br>
<a href="../../../tut/index.html">Tutorials</a>
<br>
<a href="../../../asmt.html">Assignments</a>

<p>
<a href="javascript:show('tests')">Tests, exam</a>
<div id=tests class=hidden>
    <ul>
    <li>
    <a href="../../../mid/index.html">Mid-term test</a>
    <li>
    <a href="../../../exam/info.html">Final exam</a>
    </ul>
</div>

<p>

<a href="../../../notes/index.html">Course notes</a>
<br>
<a href="../../index.html">Extra problems</a>
<br>

<a href="https://mcs.utm.utoronto.ca/~mybb/utmcs/forumdisplay.php?fid=193">Discussion board</a>

<p>
<a href="../../../netgrade-results.html">Grades so far</a>
<br>
<a href="../../../oldannounce.html">Old announcements</a>

</div>

<b>University of Toronto</b>
<br>
Faculty of Arts and Science
<br>
December 2012 Examinations
<br>
CSC 209H1F
<br>
Duration: 3 hours
<p>
Aids allowed: Any books and papers.
<br>
No electronic aids allowed: No calculators, cell phones, computers, ...
<br>
To pass the course you must receive at least 35% on this exam.

<p>
Make sure you have all 11 pages (including this page).
(Don't panic about the page count -- there's lots of space for answers.)

<p>
Answer </b><i>all</i> questions.  Answer questions in the space provided.
Answers not in the correct space will not be graded unless a note in the
correct space says "see page ..." and the answer on that page is clearly
labelled with the question number.

<p>
Be careful not to get stuck on some questions to the complete exclusion of
others.
The amount of marks or answer-space allotted does not indicate how
long it will take you to complete the question,
nor does the size of the answer-space indicate the size of the correct answer.

<p>
In general, in the C programming questions you can omit the #includes, and
you can omit comments unless you need to explain something unclear about the
functioning of your code.

<p>
<b>Do not open this booklet until you are instructed to.</b>

<p><hr noshade><p>

<b>1.</b> [10 marks]
<br>
Write a shell script which expects a number as its only command-line argument
(e.g. if it is called "file", someone might type "sh file 3") and
in a loop, keeps squaring and outputting the number until it exceeds 1000000.

<p>
For example, if the number were 3, the output would be:
<pre>
	3
	9
	81
	6561
	43046721
</pre>

<p>
You can assume that any argument is numeric, but you do have to check the
argument count.

<p>
[<a href="q1s.html">Sample solution</a>]

<p><hr noshade><p>

<b>2.</b> [12 marks]
<br>
Write a shell script (in the "sh" programming language)
which takes one or more file name arguments,
and outputs the name of the file which has the most lines in the opinion of
"wc&nbsp;-l".
(In the case of a tie, output any one of the applicable file names.)

<p>
[<a href="q2s.html">Sample solution</a>]

<p><hr noshade><p>

<b>3.</b> [8 marks]
<br>
The file "file" has the contents:
<pre>
	echo is a good command
	cat is a bad command
</pre>

<p>
a) What is the output of the following shell script?
<pre>
	if grep good file
	then
	    echo yes
	else
	    echo no
	fi
</pre>

<p>
b) What is the output of the following (highly unusual) shell script?
<pre>
	if `grep good file`
	then
	    echo yes
	else
	    echo no
	fi
</pre>

<p>
[<a href="q3s.html">Solutions</a>]

<p><hr noshade><p>

<b>4.</b> [15 marks]
<br>
Write a C program which is a simplified version of the "test" command.
Your program will support only -f (test if a file exists and is a plain
file), the two numeric relational operators -lt and -eq (the other four are
very similar, after all), and the two string relational operators = and !=.
So argc needs to be 3 for -f and 4 otherwise.

<p>
You need to check the command-line syntax but you do not need to check that
the numbers are actually numeric.

<p>
[<a href="q4s.c">Sample solution</a>]

<p><hr noshade><p>

<b>5.</b> [12 marks]
<br>
Write the library function "fgets" in terms of getc().

<p>
(Note: This question might be hard; don't spend all of your exam time on it!)

<p>
[<a href="q5s.c">Sample solution</a>]

<p><hr noshade><p>

<b>6.</b> [10 marks]
<br>
Write a C program to look at all files under the current directory,
recursively, and look for a file named "squid".  If it finds one, it
outputs either the path name relative to the current directory, or how many
subdirectories deep it is, whichever you find easiest.  If no such file name
is found, it outputs "not found".

<p>
[<a href="q6s.c">Sample solution</a>]
<br>
[<a href="q6sb.c">Another solution</a>]

<p><hr noshade><p>

<b>7.</b> [15 marks]
<br>
Write a program which creates two child processes using fork(), each
connected with a pipe so they can send data to the parent.  One of the
children writes the number "12" to the parent over its pipe.  The other
child writes the number "49" to the parent over its pipe.  The parent
reads both of these and adds them and outputs the sum to stdout.

<p>
Note: the children must execute in parallel; start them both before reading
from either.

<p>
[<a href="q7s.c">Sample solution</a>]

<p><hr noshade><p>

<b>8.</b> [12 marks]
<br>
Write a program which listens on port 3000 (AF_INET).  When someone connects
to this port, it outputs "hello".  Then it accepts another
connection (thus waiting until someone else connects).
When a second person connects, it outputs "goodbye" to the
first person and drops their connection;
and outputs "hello" to the second person.
It continues like this indefinitely,
hanging up on each person when and only when the next person connects.
The outputs are lines, terminated with a network newline (CRLF).

<p>
Your program may be unix-specific.
<br>
As mentioned on the exam cover page, you can omit the #includes.

<p>
[<a href="q8s.c">Sample solution</a>]

<p><hr noshade><p>

<b>9.</b> [6 marks]
<br>
The following code attempts to open a file named "foo" on file descriptor 8:
<pre>
	if ((fd = open("foo", ...)) &lt; 0) {
	    ...
	    ... exit ...
	}
	dup2(fd, 8);
	close(fd);
</pre>
What happens if we have file descriptors 0 through 7 already open and the
above open() call returns 8?  And how do you fix this bug?
(Two answers required: explain the bug, and write the fixed code.)

<p>
[<a href="q9s.html">Sample solution</a>]

<p><hr noshade><p>

End of exam.  Total marks: 100.  Total pages: 11.

<p>
<hr>

</body>

<!-- Mirrored from www.cdf.toronto.edu/~ajr/209/probs/exam/201209/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 00:59:29 GMT -->
</html>
