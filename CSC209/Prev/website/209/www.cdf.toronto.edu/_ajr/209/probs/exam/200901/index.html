<!doctype html>
<html>


<!-- Mirrored from www.cdf.toronto.edu/~ajr/209/probs/exam/200901/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 00:59:36 GMT -->
<head>

<title>CSC 209: exam, April 2009</title>

<meta name=viewport content="width=device-width, initial-scale=1">

<style type="text/css">
    body {
        color: black;
        background-color: #ffdddd;
    }
    hr {
        border-style: solid;
    }
    div.toc {
        float: right;
        padding-left: 20px;
        padding-right: 20px;
        padding-top: 20px;
        padding-bottom: 20px;
        background-color: #cc7777;
        color: white;
        link: white;
        visited: white;
        line-height: 150%;
    }
    div.toc a:link {
        color: white;
    }
    div.toc a:visited {
        color: white;
    }

    .hidden { display: none; }
    .unhidden { display: block; }
</style>

<script type="text/javascript">
    function show(s) {
        document.getElementById(s).className = 'unhidden';
    }
    function reveal(n) {
        document.getElementById(n + '_teaser').className = 'hidden';
        document.getElementById(n + '_hr').className = 'unhidden';
        document.getElementById(n + '_full').className = 'unhidden';
	n1 = n + 1;
        document.getElementById(n1 + '_hr').className = 'unhidden';
    }
</script>

</head>

<body>
<div class=toc>

<a href="../../../.html">Introduction</a>
<br>
<a href="../../../announce.html">Announcements</a>

<p>

<a href="../../../lect/index.html">Lectures</a>
<br>
<a href="../../../tut/index.html">Tutorials</a>
<br>
<a href="../../../asmt.html">Assignments</a>

<p>
<a href="javascript:show('tests')">Tests, exam</a>
<div id=tests class=hidden>
    <ul>
    <li>
    <a href="../../../mid/index.html">Mid-term test</a>
    <li>
    <a href="../../../exam/info.html">Final exam</a>
    </ul>
</div>

<p>

<a href="../../../notes/index.html">Course notes</a>
<br>
<a href="../../index.html">Extra problems</a>
<br>

<a href="https://mcs.utm.utoronto.ca/~mybb/utmcs/forumdisplay.php?fid=193">Discussion board</a>

<p>
<a href="../../../netgrade-results.html">Grades so far</a>
<br>
<a href="../../../oldannounce.html">Old announcements</a>

</div>

University of Toronto Mississauga
<br>
April 2009 Final Examination
<br>
CSC 209H5S
<br>
Software Tools and Systems Programming
<br>
Instructor: Alan Rosenthal
<br>
Duration: 3 hours
<br>
Aids allowed: Any books and papers.
<br>
No electronic aids allowed: No calculators, cell phones, computers, ...

<p>
Make sure you have all 11 pages (including this page).
<br>
(Don't panic about the page count -- there's lots of extra space for answers.)

<p>
Answer <i>all</i> questions.  Answer questions in the space provided.
Answers not in the correct space will not be graded unless a note in the
correct space says "see page ..." and the answer on that page is clearly
labelled with the question number.

<p>
In general, in the C programming questions you can omit the #includes, and you
can omit comments unless you need to explain something unclear about the
functioning of your code.

<p><hr noshade><p>

<b>1.</b> [15 marks]
For each of the following pairs of <i>sh</i> commands, is the behaviour the
same or different?  If the behaviour is the same, explain why the difference
in the command has no effect on the behaviour.  If the behaviour is different,
state the behaviour of each of the two commands.

<p>
a)
<pre>
	echo hello, world
</pre>
as opposed to
<pre>
	echo 'hello, world'
</pre>

<p>
b)
<pre>
	x=hello
	echo '$x, world'
</pre>
as opposed to
<pre>
	x=hello
	echo "$x, world"
</pre>

<p>
c)
<pre>
	cat file
</pre>
as opposed to
<pre>
	cat &lt;file
</pre>

<p>
d)
<pre>
	sort file | tr x y
</pre>
as opposed to
<pre>
	sort file | tr x y | sort
</pre>

<p>
e)
<pre>
	cat file &gt;file2
</pre>
as opposed to
<pre>
	cat file &gt;file2 2&gt;&amp;1
</pre>

<p>
<a href="q1s.html">solutions</a>


<p><hr noshade><p>

<b>2.</b> [6 marks]
The "Fibonacci" sequence begins: 0, 1, 1, 2, 3, 5, 8, 13, 21, ...
After the initial 0 and 1, each number is the sum of the two previous numbers,
e.g. 13=5+8.
(The traditional formulation begins with 1, but sometimes in Computer Science
we like to begin with 0; anyway, please use the above version for this exam
question.)

<p>
Write a loop in the <i>sh</i> programming language to output the Fibonacci
sequence up to the last number less than 1000 (i.e. do not output numbers
greater than (or equal to) 1000).

<p>
<a href="q2s.html">sample solution</a>


<p><hr noshade><p>

<b>3.</b> [9 marks]
Write a shell script (in the <i>sh</i> programming language) which
takes a <i>grep</i> pattern and a file name, and outputs the single line in the
specified file which matches that pattern.
<p>
If other than exactly one line matches, this is an error.  If no lines match,
there should be no output (to stderr or to stdout), but the shell script
should exit
with exit status 1.  If more than one line matches, output a suitable error
message to stderr, and nothing to stdout.
<p>
Your shell script takes just the two specified arguments, and should output a
usage error if run with other than the two specified arguments.

<p>
<a href="q3s.html">sample solution</a>


<p><hr noshade><p>

<b>4.</b> [7 marks]
Consider the following portion of a unix filesystem:

<table border=1>
<tr><th>inode number</th><th>is directory?</th><th>contents</th></tr>
<tr><td>2</td><td>D</td><td>"." 2, ".." 2, "bin" 3, "usr" 4, "vmunix" 5</td></tr>
<tr><td>3</td><td>D</td><td>"." 3, ".." 2, "sh" 6</td></tr>
<tr><td>4</td><td>D</td><td>"." 4, ".." 2, "ajr" 7</td></tr>
<tr><td>5</td><td>&nbsp;</td><td><i>unix kernel machine code</i></td></tr>
<tr><td>6</td><td>&nbsp;</td><td><i>machine code for </i>sh</td></tr>
<tr><td>7</td><td>D</td><td>"." 7, ".." 4, "hello.c" 8</td></tr>
<tr><td>8</td><td>&nbsp;</td><td>#include &lt;stdio.h&gt; int main(){print("Hello\n");return(0);}</td></tr>
<tr><td>9</td><td>&nbsp;</td><td>&nbsp;</td></tr>
</table>

<p>
a) What is an absolute path name for inode 8?

<p>
b) If we execute the command  <tt>mkdir /usr/sally</tt> , and the newly
created directory is inode 9, what is changed in the table above?  Make the
changes in place in the table, by striking out any removed information and
writing in added information.

<p>
c) [1 mark] What is another absolute path name for inode 8, different from
your part 'a' answer?

<p>
<a href="q4s.html">solutions</a>


<p><hr noshade><p>


<b>5.</b> [3 marks]
What is the purpose of the "link count" in the inode in the unix
filesystem?  It is incremented when the file is linked into the filesystem
somewhere, and decremented when the file is unlinked; but why does the unix
operating system have to track this information?

<p>
<a href="q5s.html">sample solution</a>


<p><hr noshade><p>

<b>6.</b> [20 marks]
Write a simplified version of <i>cmp</i> in C.
<i>cmp</i> takes two filename arguments.  It reads the files in parallel, one
byte (character) at a time, until it reaches a difference.  If the files are
identical, it exits with no output.
<p>
If one file ends before the other, but the files are identical up to that
point, the message is of the format "EOF on filename" (specifying the
appropriate file name).  If the files' characters differ at a particular
point, it outputs a message of the format "file1 file2 differ: char 123"
(using the two file names, and the byte position in the file (one-origin) of
the difference).
<p>
The exit status is 0 if the files match; 1 if the files differ; and 2 if there
is an error of any kind.
<p>
You needn't call getopt().  You do, however, have to output all appropriate
error messages for a standard unix tool.
<p>
You can omit the #includes.

<p>
<a href="q6s.c">sample solution</a>
<p>
<a href="q6sb.c">sample solution which is less terse but becomes more
complicated</a>


<p><hr noshade><p>

<b>7.</b> [20 marks]
Write a simplified version of <i>man</i> in C.
<p>
Your <i>man</i> command will take zero or more arguments, and loop through
them.  For each argument, it searches all eight possible 'man' directories, in
order, for a file name beginning with the supplied name and a dot.  For the
first one it finds, it executes /usr/bin/less (using fork() and execl()),
specifying the absolute path name to the appropriate file as argv[1].
<p>
The man directories are /usr/share/catman/man1, /usr/share/catman/man2, and so
on through /usr/share/catman/man8 (inclusive).

<p>
A sample possible file name matching "man cat" is
/usr/share/catman/man1/cat.1
Another sample possible file name matching "man cat" is
/usr/share/catman/man1/cat.1n
However, the file name /usr/share/catman/man1/catch.1 must not be deemed to
match "man cat" -- you need to check for the dot as well.

<p>
<a href="q7s.c">sample solution</a>


<p><hr noshade><p>

<b>8.</b> [20 marks]
Write a C program which listens on port number 1234 and tells each caller how
many people have connected so far.  You could connect to it by typing
"telnet hostname 1234" (for the appropriate hostname), and it would output
"1" and close the connection.  The next person would be told "2",
etc.  The program does not exit (until it is killed).

<p>
You do not have to handle multiple simultaneous incoming connections.
Remember to use the network newline convention -- end the output with a
newline.
You can omit the #includes, and you can cite course web pages rather than
copying out bits of code if you can do so unambiguously.

<p>
<a href="q8s.c">sample solution</a>


<p><hr noshade><p>

End of exam.  Total marks: 100.  Total pages: 11.

<p>
<hr>

</body>

<!-- Mirrored from www.cdf.toronto.edu/~ajr/209/probs/exam/200901/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 00:59:38 GMT -->
</html>
